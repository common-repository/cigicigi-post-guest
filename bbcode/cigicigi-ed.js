// CigiCigi Post Guest
// Author: CigiCigi Online iLk3r
//  Copyright 2011  CigiCigi Online  ( info@cigicigi.co )

//    This program is free software; you can redistribute it and/or modify
//    it under the terms of the GNU General Public License, version 2, as 
//    published by the Free Software Foundation.

//    This program is distributed in the hope that it will be useful,
//    but WITHOUT ANY WARRANTY; without even the implied warranty of
//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//    GNU General Public License for more details.

//    You should have received a copy of the GNU General Public License
//    along with this program; if not, write to the Free Software
//    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
//Pack for CigiCigi Post Guest
function cigicigi_post_guest_doList(a,b,c){textarea=document.getElementById(c);if(document.selection){textarea.focus();var d=document.selection.createRange();var e=d.text.split("\n");for(i=0;i<e.length;i++){e[i]="[*]"+e[i]+"[/*]"}d.text=a+"\n"+e.join("\n")+"\n"+b}else{var f=textarea.value.length;var g=textarea.selectionStart;var h=textarea.selectionEnd;var i;var j=textarea.scrollTop;var k=textarea.scrollLeft;var d=textarea.value.substring(g,h);var e=d.split("\n");for(i=0;i<e.length;i++){e[i]="[*]"+e[i]+"[/*]"}var l=a+"\n"+e.join("\n")+"\n"+b;textarea.value=textarea.value.substring(0,g)+l+textarea.value.substring(h,f);textarea.scrollTop=j;textarea.scrollLeft=k}}function cigicigi_post_guest_doAddTags(a,b,c){textarea=document.getElementById(c);if(document.selection){textarea.focus();var d=document.selection.createRange();d.text=a+d.text+b}else{var e=textarea.value.length;var f=textarea.selectionStart;var g=textarea.selectionEnd;var h=textarea.scrollTop;var i=textarea.scrollLeft;var d=textarea.value.substring(f,g);var j=a+d+b;textarea.value=textarea.value.substring(0,f)+j+textarea.value.substring(g,e);textarea.scrollTop=h;textarea.scrollLeft=i}}function cigicigi_post_guest_doURL(a){textarea=document.getElementById(a);var b=prompt("URL:","http://");var c=textarea.scrollTop;var d=textarea.scrollLeft;if(b!=""&&b!=null){if(document.selection){textarea.focus();var e=document.selection.createRange();if(e.text==""){e.text="[url]"+b+"[/url]"}else{e.text="[url="+b+"]"+e.text+"[/url]"}}else{var f=textarea.value.length;var g=textarea.selectionStart;var h=textarea.selectionEnd;var e=textarea.value.substring(g,h);if(e==""){var i="[url]"+b+"[/url]"}else{var i="[url="+b+"]"+e+"[/url]"}textarea.value=textarea.value.substring(0,g)+i+textarea.value.substring(h,f);textarea.scrollTop=c;textarea.scrollLeft=d}}}function cigicigi_post_guest_doImage(a){textarea=document.getElementById(a);var b=prompt("Image URL:","http://");var c=textarea.scrollTop;var d=textarea.scrollLeft;if(b!=""&&b!=null){if(document.selection){textarea.focus();var e=document.selection.createRange();e.text="[img]"+b+"[/img]"}else{var f=textarea.value.length;var g=textarea.selectionStart;var h=textarea.selectionEnd;var e=textarea.value.substring(g,h);var i="[img]"+b+"[/img]";textarea.value=textarea.value.substring(0,g)+i+textarea.value.substring(h,f);textarea.scrollTop=c;textarea.scrollLeft=d}}}function cigicigi_post_guest_doGetBBCode(){var a=document.getElementById("cigicigi_post_guest_image_properties_filename").innerHTML;var b=document.getElementById("cigicigi_post_guest_image_align").value;var c=document.getElementById("cigicigi_post_guest_image_width").value;if(c>600){var c=600}var d="[upload="+b+","+c+"]"+a+"[/upload]";prompt("BBCode",d)}function cigicigi_post_guest_doAddUpload(a){textarea=document.getElementById(a);var b=textarea.scrollTop;var c=textarea.scrollLeft;var d=textarea.value.length;var e=textarea.selectionStart;var f=textarea.selectionEnd;var g=textarea.value.substring(e,f);var h=document.getElementById("cigicigi_post_guest_image_properties_filename").innerHTML;var i=document.getElementById("cigicigi_post_guest_image_align").value;var j=document.getElementById("cigicigi_post_guest_image_width").value;if(j>600){var j=600}var k="[upload="+i+","+j+"]"+h+"[/upload]";textarea.value=textarea.value.substring(0,e)+k+textarea.value.substring(f,d);textarea.scrollTop=b;textarea.scrollLeft=c}function cigicigi_post_guest_doAddMore(a){textarea=document.getElementById(a);var b=textarea.scrollTop;var c=textarea.scrollLeft;var d=textarea.value.length;var e=textarea.selectionStart;var f=textarea.selectionEnd;var g=textarea.value.substring(e,f);var h="[more]";textarea.value=textarea.value.substring(0,e)+h+textarea.value.substring(f,d);textarea.scrollTop=b;textarea.scrollLeft=c}function cigicigi_post_guest_EkleBoyut(a,b){var c=document.getElementById(b).value;switch(c){case"2":cigicigi_post_guest_doAddTags("[size=6]","[/size]",a);break;case"3":cigicigi_post_guest_doAddTags("[size=5]","[/size]",a);break;case"4":cigicigi_post_guest_doAddTags("[size=4]","[/size]",a);break;case"5":cigicigi_post_guest_doAddTags("[size=3]","[/size]",a);break;case"6":cigicigi_post_guest_doAddTags("[size=2]","[/size]",a);break;case"7":cigicigi_post_guest_doAddTags("[size=1]","[/size]",a);break;default:cigicigi_post_guest_doAddTags("[size=5]","[/size]",a)}}function cigicigi_post_guest_edToolbar(a,b,c){document.write('<div><table border="0"><tr>');document.write('<td class="editor"><select class="button" id="boyut" name="boyut" onChange="cigicigi_post_guest_EkleBoyut(\''+a+'\', this.id);"><option value="3" selected="selected">Size</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></td>');document.write('<td class="editor"><img class="button" src="'+b+'bold.gif" name="btnBold" title="Bold" onClick="cigicigi_post_guest_doAddTags(\'[b]\',\'[/b]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'italic.gif" name="btnItalic" title="Italic" onClick="cigicigi_post_guest_doAddTags(\'[i]\',\'[/i]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'underline.gif" name="btnUnderline" title="Underline" onClick="cigicigi_post_guest_doAddTags(\'[u]\',\'[/u]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'createlink.gif" name="btnLink" title="Insert URL Link" onClick="cigicigi_post_guest_doURL(\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'insertimage.gif" name="btnPicture" title="Insert Image" onClick="cigicigi_post_guest_doImage(\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'justifycenter.gif" name="btnList" title="Center" onClick="cigicigi_post_guest_doAddTags(\'[align=center]\',\'[/align]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'justifyright.gif" name="btnList" title="Right" onClick="cigicigi_post_guest_doAddTags(\'[align=right]\',\'[/align]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'insertunorderedlist.gif" name="btnList" title="Unordered List" onClick="cigicigi_post_guest_doList(\'[list=unordered]\',\'[/list]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'insertorderedlist.gif" name="btnList" title="Ordered List" onClick="cigicigi_post_guest_doList(\'[list=ordered]\',\'[/list]\',\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'more.gif" name="btnList" title="More" onClick="cigicigi_post_guest_doAddMore(\''+a+"')\"></td>");document.write('<td class="editor"><img class="button" src="'+b+'code.gif" name="btnCode" title="Code" onClick="cigicigi_post_guest_doAddTags(\'[code]\',\'[/code]\',\''+a+"')\"></td>");if(c=="yes"){document.write('<td class="editor"><a href="#cigicigi_post_guest_dialog" name="cigicigi_post_guest_modal" border="0"><img class="button" src="'+b+'upload.gif" name="btnCode" title="Code"></a></td>')}document.write("</tr></table></div>")}function onlyNumbers_width(a){var b=a.which?a.which:event.keyCode;if(b>31&&(b<48||b>57)){return false}if(a>600){$("#cigicigi_post_guest_image_width").val("600")}return true}function upload_check(a,b){var c;if(a.length==0){return}if(window.XMLHttpRequest){c=new XMLHttpRequest}else{c=new ActiveXObject("Microsoft.XMLHTTP")}c.onreadystatechange=function(){if(c.readyState==4&&c.status==200){var a=c.responseText;var b=a.split(",");if(b[0]=="yes"){var d=$("#cigicigi_post_guest_upload_bar_image").width();if(d<360){var e=d+50;$("#cigicigi_post_guest_upload_bar_image").width(e)}else{$("#cigicigi_post_guest_upload_bar_image").width(370)}}if(b[0]=="hata"){$("#cigicigi_post_guest_upload_bar_image").width(300);$("#cigicigi_post_guest_upload_message").hide();$("#cigicigi_post_guest_upload_bar").hide()}if(b[0]=="no"){clearTimeout(timeout_upload);$("#cigicigi_post_guest_upload_bar_image").width(370);$("#cigicigi_post_guest_image_properties_title").show();$("#cigicigi_post_guest_media_upload").hide();$("#cigicigi_post_guest_image_properties").show();$("#cigicigi_post_guest_dialog").height(335);$("#cigicigi_post_guest_image_properties_filename").text(b[2]);$("#cigicigi_post_guest_upload_information").append(b[2]);$("#cigicigi_post_guest_file_var").val(b[2]);$("#cigicigi_post_guest_upload_information").show();$("#cigicigi_post_guest_image_width").val(b[3]);$("#cigicigi_post_guest_upload_message").hide()}}return};c.open("GET",b+"?do="+a,true);c.send()}var textarea;var content;$(document).ready(function(){$("a[name=cigicigi_post_guest_modal]").click(function(a){a.preventDefault();var b=$(this).attr("href");var c=$(document).height();var d=$(window).width();$("#cigicigi_post_guest_media_mask").css({width:d,height:c});$("#cigicigi_post_guest_media_mask").fadeIn(1e3);$("#cigicigi_post_guest_media_mask").fadeTo("slow",.8);var e=$(window).height();var f=$(window).width();$(b).css("top",e/2+$(b).height()/2);$(b).css("left",f/2-$(b).width()/2);$(b).fadeIn(2e3)});$(".window .close").click(function(a){a.preventDefault();$("#cigicigi_post_guest_media_mask").hide();$(".window").hide()});$("#cigicigi_post_guest_media_mask").click(function(){$(this).hide();$(".window").hide()});$("#cigicigi_post_guest_file_upload_form").submit(function(){$("#cigicigi_post_guest_file_upload_form").attr("target","cigicigi_post_guest_upload_target");$("#cigicigi_post_guest_upload_message").show();$("#cigicigi_post_guest_upload_bar").show()})})